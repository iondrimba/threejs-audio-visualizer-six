!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.callback=null}var e,n,o;return e=t,(n=[{key:"load",value:function(t){var e=this,n=new XMLHttpRequest;n.open("GET",t,!0),n.onprogress=function(t){var n=Math.floor(t.loaded/t.total*100);e.callback(n)},n.onload=function(){e.complete(t)},n.send()}},{key:"progress",value:function(t){this.callback=t}},{key:"complete",value:function(){}}])&&r(e.prototype,n),o&&r(e,o),t}(),i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function a(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&(n[r[o]]=t[r[o]])}return n}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},f=function(t,e){return function(n){return Math.max(Math.min(n,e),t)}},l=function(t){return t%1?Number(t.toFixed(5)):t},p=/(-)?(\d[\d\.]*)/g,h=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,d=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))$/i,y={test:function(t){return"number"==typeof t},parse:parseFloat,transform:function(t){return t}},v=(c({},y,{transform:f(0,1)}),c({},y,{default:1}),function(t){return{test:function(e){return"string"==typeof e&&e.endsWith(t)&&1===e.split(" ").length},parse:parseFloat,transform:function(e){return""+e+t}}}),m=v("deg"),g=v("%"),b=v("px"),w=v("vh"),E=v("vw"),S=(c({},g,{parse:function(t){return g.parse(t)/100},transform:function(t){return g.transform(100*t)}}),f(0,255)),O=function(t){return void 0!==t.red},C=function(t){return void 0!==t.hue},k=function(t){return function(e){if("string"!=typeof e)return e;for(var n,r={},o=(n=e,n.substring(n.indexOf("(")+1,n.lastIndexOf(")"))).split(/,\s*/),i=0;i<4;i++)r[t[i]]=void 0!==o[i]?parseFloat(o[i]):1;return r}},M=c({},y,{transform:function(t){return Math.round(S(t))}});function R(t,e){return t.startsWith(e)&&d.test(t)}var P={test:function(t){return"string"==typeof t?R(t,"rgb"):O(t)},parse:k(["red","green","blue","alpha"]),transform:function(t){var e=t.red,n=t.green,r=t.blue,o=t.alpha;return function(t){var e=t.red,n=t.green,r=t.blue,o=t.alpha;return"rgba("+e+", "+n+", "+r+", "+(void 0===o?1:o)+")"}({red:M.transform(e),green:M.transform(n),blue:M.transform(r),alpha:l(o)})}},T={test:function(t){return"string"==typeof t?R(t,"hsl"):C(t)},parse:k(["hue","saturation","lightness","alpha"]),transform:function(t){var e=t.hue,n=t.saturation,r=t.lightness,o=t.alpha;return function(t){var e=t.hue,n=t.saturation,r=t.lightness,o=t.alpha;return"hsla("+e+", "+n+", "+r+", "+(void 0===o?1:o)+")"}({hue:Math.round(e),saturation:g.transform(l(n)),lightness:g.transform(l(r)),alpha:l(o)})}},H=c({},P,{test:function(t){return"string"==typeof t&&R(t,"#")},parse:function(t){var e="",n="",r="";return t.length>4?(e=t.substr(1,2),n=t.substr(3,2),r=t.substr(5,2)):(e=t.substr(1,1),n=t.substr(2,1),r=t.substr(3,1),e+=e,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:1}}}),L={test:function(t){return"string"==typeof t&&d.test(t)||O(t)||C(t)},parse:function(t){return P.test(t)?P.parse(t):T.test(t)?T.parse(t):H.test(t)?H.parse(t):t},transform:function(t){return O(t)?P.transform(t):C(t)?T.transform(t):t}},A=function(t){return"number"==typeof t?0:t},x={test:function(t){if("string"!=typeof t||!isNaN(t))return!1;var e=0,n=t.match(p),r=t.match(h);return n&&(e+=n.length),r&&(e+=r.length),e>0},parse:function(t){var e=t,n=[],r=e.match(h);r&&(e=e.replace(h,"${c}"),n.push.apply(n,r.map(L.parse)));var o=e.match(p);return o&&n.push.apply(n,o.map(y.parse)),n},createTransformer:function(t){var e=t,n=0,r=t.match(h),o=r?r.length:0;if(r)for(var i=0;i<o;i++)e=e.replace(r[i],"${c}"),n++;var a=e.match(p),u=a?a.length:0;if(a)for(i=0;i<u;i++)e=e.replace(a[i],"${n}"),n++;return function(t){for(var r=e,i=0;i<n;i++)r=r.replace(i<o?"${c}":"${n}",i<o?L.transform(t[i]):l(t[i]));return r}},getAnimatableNone:function(t){var e=x.parse(t);return x.createTransformer(t)(e.map(A))}},j=function(){};j=function(t,e){if(!t)throw new Error(e)};var V,F=0,q="undefined"!=typeof window&&void 0!==window.requestAnimationFrame?function(t){return window.requestAnimationFrame(t)}:function(t){var e=Date.now(),n=Math.max(0,16.7-(e-F));F=e+n,setTimeout(function(){return t(F)},n)};!function(t){t.Read="read",t.Update="update",t.Render="render",t.PostRender="postRender",t.FixedUpdate="fixedUpdate"}(V||(V={}));var B=1/60*1e3,G=!0,_=!1,D=!1,I={delta:0,timestamp:0},z=[V.Read,V.Update,V.Render,V.PostRender],W=function(t){return _=t},Y=z.reduce(function(t,e){var n,r,o,i,a,u,s,c,f,l=(n=W,r=[],o=[],i=0,a=!1,u=0,s=new WeakSet,c=new WeakSet,f={cancel:function(t){var e=o.indexOf(t);s.add(t),-1!==e&&o.splice(e,1)},process:function(t){var e,l;if(a=!0,r=(e=[o,r])[0],(o=e[1]).length=0,i=r.length)for(u=0;u<i;u++)(l=r[u])(t),!0!==c.has(l)||s.has(l)||(f.schedule(l),n(!0));a=!1},schedule:function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1),j("function"==typeof t,"Argument must be a function");var u=n&&a,f=u?r:o;s.delete(t),e&&c.add(t),-1===f.indexOf(t)&&(f.push(t),u&&(i=r.length))}});return t.sync[e]=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),_||J(),l.schedule(t,e,n),t},t.cancelSync[e]=function(t){return l.cancel(t)},t.steps[e]=l,t},{steps:{},sync:{},cancelSync:{}}),U=Y.steps,X=Y.sync,N=Y.cancelSync,$=function(t){return U[t].process(I)},K=function(t){_=!1,I.delta=G?B:Math.max(Math.min(t-I.timestamp,40),1),G||(B=I.delta),I.timestamp=t,D=!0,z.forEach($),D=!1,_&&(G=!1,q(K))},J=function(){_=!0,G=!0,D||q(K)},Q=function(){return I},Z=X;var tt=function(t){return"number"==typeof t},et=function(t){return function(e,n,r){return void 0!==r?t(e,n,r):function(r){return t(e,n,r)}}},nt=et(function(t,e,n){return Math.min(Math.max(n,t),e)}),rt=function(t,e,n){return-n*t+n*e+t},ot=function(){return(ot=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},it=function(t,e,n){var r=t*t,o=e*e;return Math.sqrt(Math.max(0,n*(o-r)+r))},at=[H,P,T],ut=function(t){return at.find(function(e){return e.test(t)})},st=function(t){return"'"+t+"' is not an animatable color. Use the equivalent color code instead."},ct=function(t,e){var n=ut(t),r=ut(e);j(!!n,st(t)),j(!!r,st(e)),j(n.transform===r.transform,"Both colors must be hex/RGBA, OR both must be HSLA.");var o=n.parse(t),i=r.parse(e),a=ot({},o),u=n===T?rt:it;return function(t){for(var e in a)"alpha"!==e&&(a[e]=u(o[e],i[e],t));return a.alpha=rt(o.alpha,i.alpha,t),n.transform(a)}},ft=function(t,e){return function(n){return e(t(n))}},lt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(ft)};function pt(t,e){return tt(t)?function(n){return rt(t,e,n)}:L.test(t)?ct(t,e):yt(t,e)}var ht=function(t,e){var n=t.slice(),r=n.length,o=t.map(function(t,n){return pt(t,e[n])});return function(t){for(var e=0;e<r;e++)n[e]=o[e](t);return n}};function dt(t){for(var e=x.parse(t),n=e.length,r=0,o=0,i=0,a=0;a<n;a++)r||"number"==typeof e[a]?r++:void 0!==e[a].hue?i++:o++;return{parsed:e,numNumbers:r,numRGB:o,numHSL:i}}var yt=function(t,e){var n=x.createTransformer(e),r=dt(t),o=dt(e);return j(r.numHSL===o.numHSL&&r.numRGB===o.numRGB&&r.numNumbers>=o.numNumbers,"Complex values '"+t+"' and '"+e+"' too different to mix. Ensure all colors are of the same type."),lt(ht(r.parsed,o.parsed),n)};var vt=function(t){return t},mt=function(t){return void 0===t&&(t=vt),et(function(e,n,r){var o=n-r,i=-(0-e+1)*(0-t(Math.abs(o)));return o<=0?n+i:n-i})},gt=(mt(),mt(Math.sqrt),function(t,e){return tt(t)?t/(1e3/e):0}),bt=function(t,e){return e?t*(1e3/e):0},wt=(et(function(t,e,n){var r=e-t;return((n-t)%r+r)%r+t}),nt(0,1),function(){return(wt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)});Math.round;Math.round;var Et=function(){function t(t){void 0===t&&(t={}),this.props=t}return t.prototype.applyMiddleware=function(t){return this.create(u({},this.props,{middleware:this.props.middleware?[t].concat(this.props.middleware):[t]}))},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=1===t.length?t[0]:lt.apply(void 0,t);return this.applyMiddleware(function(t){return function(e){return t(n(e))}})},t.prototype.while=function(t){return this.applyMiddleware(function(e,n){return function(r){return t(r)?e(r):n()}})},t.prototype.filter=function(t){return this.applyMiddleware(function(e){return function(n){return t(n)&&e(n)}})},t}(),St=function(){return function(t,e){var n=t.middleware,r=t.onComplete,o=this;this.isActive=!0,this.update=function(t){o.observer.update&&o.updateObserver(t)},this.complete=function(){o.observer.complete&&o.isActive&&o.observer.complete(),o.onComplete&&o.onComplete(),o.isActive=!1},this.error=function(t){o.observer.error&&o.isActive&&o.observer.error(t),o.isActive=!1},this.observer=e,this.updateObserver=function(t){return e.update(t)},this.onComplete=r,e.update&&n&&n.length&&n.forEach(function(t){return o.updateObserver=t(o.updateObserver,o.complete)})}}(),Ot=function(t,e,n){var r=e.middleware;return new St({middleware:r,onComplete:n},"function"==typeof t?{update:t}:t)},Ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.create=function(t){return new e(t)},e.prototype.start=function(t){void 0===t&&(t={});var e=!1,n={stop:function(){}},r=this.props,o=r.init,i=s(r,["init"]),a=o(Ot(t,i,function(){e=!0,n.stop()}));return n=a?u({},n,a):n,t.registerParent&&t.registerParent(n),e&&n.stop(),n},e}(Et),kt=function(t){return new Ct({init:t})},Mt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.subscribers=[],e}return a(e,t),e.prototype.complete=function(){this.subscribers.forEach(function(t){return t.complete()})},e.prototype.error=function(t){this.subscribers.forEach(function(e){return e.error(t)})},e.prototype.update=function(t){for(var e=0;e<this.subscribers.length;e++)this.subscribers[e].update(t)},e.prototype.subscribe=function(t){var e=this,n=Ot(t,this.props);return this.subscribers.push(n),{unsubscribe:function(){var t=e.subscribers.indexOf(n);-1!==t&&e.subscribers.splice(t,1)}}},e.prototype.stop=function(){this.parent&&this.parent.stop()},e.prototype.registerParent=function(t){this.stop(),this.parent=t},e}(Et),Rt=function(t){return Array.isArray(t)},Pt=function(t){var e=typeof t;return"string"===e||"number"===e},Tt=function(t){function e(e){var n=t.call(this,e)||this;return n.scheduleVelocityCheck=function(){return Z.postRender(n.velocityCheck)},n.velocityCheck=function(t){t.timestamp!==n.lastUpdated&&(n.prev=n.current)},n.prev=n.current=e.value||0,Pt(n.current)?(n.updateCurrent=function(t){return n.current=t},n.getVelocityOfCurrent=function(){return n.getSingleVelocity(n.current,n.prev)}):Rt(n.current)?(n.updateCurrent=function(t){return n.current=t.slice()},n.getVelocityOfCurrent=function(){return n.getListVelocity()}):(n.updateCurrent=function(t){for(var e in n.current={},t)t.hasOwnProperty(e)&&(n.current[e]=t[e])},n.getVelocityOfCurrent=function(){return n.getMapVelocity()}),e.initialSubscription&&n.subscribe(e.initialSubscription),n}return a(e,t),e.prototype.create=function(t){return new e(t)},e.prototype.get=function(){return this.current},e.prototype.getVelocity=function(){return this.getVelocityOfCurrent()},e.prototype.update=function(e){t.prototype.update.call(this,e),this.prev=this.current,this.updateCurrent(e);var n=Q(),r=n.delta,o=n.timestamp;this.timeDelta=r,this.lastUpdated=o,Z.postRender(this.scheduleVelocityCheck)},e.prototype.subscribe=function(e){var n=t.prototype.subscribe.call(this,e);return this.subscribers[this.subscribers.length-1].update(this.current),n},e.prototype.getSingleVelocity=function(t,e){return"number"==typeof t&&"number"==typeof e?bt(t-e,this.timeDelta):bt(parseFloat(t)-parseFloat(e),this.timeDelta)||0},e.prototype.getListVelocity=function(){var t=this;return this.current.map(function(e,n){return t.getSingleVelocity(e,t.prev[n])})},e.prototype.getMapVelocity=function(){var t={};for(var e in this.current)this.current.hasOwnProperty(e)&&(t[e]=this.getSingleVelocity(this.current[e],this.prev[e]));return t},e}(Mt),Ht=function(t,e){return new Tt({value:t,initialSubscription:e})},Lt=function(t){var e=t.getCount,n=t.getFirst,r=t.getOutput,o=t.mapApi,i=t.setProp,a=t.startActions;return function(t){return kt(function(u){var s=u.update,c=u.complete,f=u.error,l=e(t),p=r(),h=function(){return s(p)},d=0,y=a(t,function(t,e){var n=!1;return t.start({complete:function(){n||(n=!0,++d===l&&Z.update(c))},error:f,update:function(t){i(p,e,t),Z.update(h,!1,!0)}})});return Object.keys(n(y)).reduce(function(t,e){return t[e]=o(y,e),t},{})})}},At=Lt({getOutput:function(){return{}},getCount:function(t){return Object.keys(t).length},getFirst:function(t){return t[Object.keys(t)[0]]},mapApi:function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Object.keys(t).reduce(function(r,o){var i;return t[o][e]&&(n[0]&&void 0!==n[0][o]?r[o]=t[o][e](n[0][o]):r[o]=(i=t[o])[e].apply(i,n)),r},{})}},setProp:function(t,e,n){return t[e]=n},startActions:function(t,e){return Object.keys(t).reduce(function(n,r){return n[r]=e(t[r],r),n},{})}}),xt=Lt({getOutput:function(){return[]},getCount:function(t){return t.length},getFirst:function(t){return t[0]},mapApi:function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.map(function(t,r){if(t[e])return Array.isArray(n[0])?t[e](n[0][r]):t[e].apply(t,n)})}},setProp:function(t,e,n){return t[e]=n},startActions:function(t,e){return t.map(function(t,n){return e(t,n)})}}),jt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return xt(t)},Vt=[b,g,m,w,E],Ft=function(t){return Vt.find(function(e){return e.test(t)})},qt=function(t,e){return t(e)},Bt=function(t,e,n){var r=n[0],o=e[r].map(function(r,o){var i=n.reduce(function(t){return function(e,n){return e[n]=e[n][t],e}}(o),u({},e));return Yt(r)(t,i)});return jt.apply(void 0,o)},Gt=function(t,e,n){var r=n[0],o=Object.keys(e[r]).reduce(function(o,i){var a=n.reduce(function(t){return function(e,n){return e[n]=e[n][t],e}}(i),u({},e));return o[i]=Yt(e[r][i])(t,a),o},{});return At(o)},_t=function(t,e){var n=e.from,r=e.to,o=s(e,["from","to"]),i=Ft(n)||Ft(r),a=i.transform,c=i.parse;return t(u({},o,{from:"string"==typeof n?c(n):n,to:"string"==typeof r?c(r):r})).pipe(a)},Dt=function(t){return function(e,n){var r=n.from,o=n.to,i=s(n,["from","to"]);return e(u({},i,{from:0,to:1})).pipe(t(r,o))}},It=Dt(ct),zt=Dt(yt),Wt=function(t,e){var n=function(t){var e=Object.keys(t),n=function(e,n){return void 0!==e&&!t[n](e)};return{getVectorKeys:function(t){return e.reduce(function(e,r){return n(t[r],r)&&e.push(r),e},[])},testVectorProps:function(t){return t&&e.some(function(e){return n(t[e],e)})}}}(e),r=n.testVectorProps,o=n.getVectorKeys;return function(e){if(!r(e))return t(e);var n=o(e),i=e[n[0]];return Yt(i)(t,e,n)}},Yt=function(t){return"number"==typeof t?qt:Array.isArray(t)?Bt:function(t){return Boolean(Ft(t))}(t)?_t:L.test(t)?It:x.test(t)?zt:"object"==typeof t?Gt:qt},Ut=Wt(function(t){return void 0===t&&(t={}),kt(function(e){var n=e.complete,r=e.update,o=t.acceleration,i=void 0===o?0:o,a=t.friction,u=void 0===a?0:a,s=t.velocity,c=void 0===s?0:s,f=t.springStrength,l=t.to,p=t.restSpeed,h=void 0===p?.001:p,d=t.from,y=void 0===d?0:d,v=Z.update(function(t){var e=t.delta,o=Math.max(e,16);(i&&(c+=gt(i,o)),u&&(c*=Math.pow(1-u,o/100)),void 0!==f&&void 0!==l)&&(c+=(l-y)*gt(f,o));y+=gt(c,o),r(y),!1!==h&&(!c||Math.abs(c)<=h)&&(N.update(v),n())},!0);return{set:function(t){return y=t,this},setAcceleration:function(t){return i=t,this},setFriction:function(t){return u=t,this},setSpringStrength:function(t){return f=t,this},setSpringTarget:function(t){return l=t,this},setVelocity:function(t){return c=t,this},stop:function(){return N.update(v)}}})},{acceleration:y.test,friction:y.test,velocity:y.test,from:y.test,to:y.test,springStrength:y.test}),Xt=function(t,e,n){return kt(function(r){var o=r.update,i=e.split(" ").map(function(e){return t.addEventListener(e,o,n),e});return{stop:function(){return i.forEach(function(e){return t.removeEventListener(e,o,n)})}}})},Nt=function(){return{clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}},$t=function(t,e){return void 0===e&&(e={clientX:0,clientY:0,pageX:0,pageY:0,x:0,y:0}),e.clientX=e.x=t.clientX,e.clientY=e.y=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY,e},Kt=[Nt()];if("undefined"!=typeof document){Xt(document,"touchstart touchmove",{passive:!0,capture:!0}).start(function(t){var e=t.touches;!0;var n=e.length;Kt.length=0;for(var r=0;r<n;r++){var o=e[r];Kt.push($t(o))}})}var Jt=Nt();if("undefined"!=typeof document){Xt(document,"mousedown mousemove",!0).start(function(t){!0,$t(t,Jt)})}function Qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Zt=new(function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.songFile="https://iondrimbafilho.me/ready_player_one.mp3",this.percent=0,this.playing=!1,this.volume=1,this.sceneBackGroundColor=4000064,this.spotLightColor=16777215,this.ambientLightColor=16777215,this.groupSpheres=new THREE.Object3D,this.groupCones=new THREE.Object3D,this.tiles=[],this.loader=new o,this.loader.progress(function(t){e.progress(t)}),this.loaderBar=document.querySelector(".loader"),this.loader.load(this.songFile),this.playIntro=document.querySelector(".play-intro"),this.loader.complete=this.complete.bind(this)}var e,n,r;return e=t,(n=[{key:"progress",value:function(t){var e=this;this.loaderBar.style.transform="scale(".concat(t/100+.1,", .999)"),100===t&&setTimeout(function(){requestAnimationFrame(function(){e.playIntro.classList.add("control-show"),e.loaderBar.classList.add("removeLoader"),e.loaderBar.style.transform="scale(.999, 0)"})},800)}},{key:"complete",value:function(t){this.setupAudio(),this.addSoundControls(),this.createScene(),this.createCamera(),this.addAmbientLight(this.ambientLightColor),this.addSpotLight(new THREE.SpotLight(this.spotLightColor),50,400,50),this.addCameraControls(),this.playSound(t),this.addEventListener(),this.addGrid(),this.floorShape=this.createShape(),this.createGround(this.floorShape),this.animate()}},{key:"createShape",value:function(){var t=this,e=[new THREE.Vector2(-200,200),new THREE.Vector2(-200,-200),new THREE.Vector2(200,-200),new THREE.Vector2(200,200)],n=new THREE.Shape(e);n.autoClose=!0;var r=new THREE.SphereBufferGeometry(.5,16,16),o=new THREE.MeshPhongMaterial({color:3836159,specular:16777215,shininess:2,emissive:743353,side:THREE.DoubleSide});this.createHoles(n,{cols:{start:-4,end:5},rows:{start:-5,end:0},geometry:r,material:o,elementCreate:this.createSphere,onAdd:function(e,n,r,o,i){t.addPhysics(e),e.position.set(n-1*o,-.5,r-1*i),t.groupSpheres.add(e),t.tiles.push(e)}});var i=new THREE.CylinderGeometry(.4,.4,10,59),a=new THREE.MeshPhongMaterial({color:1244977,flatShading:THREE.FlatShading,side:THREE.DoubleSide});return this.createHoles(n,{cols:{start:-4,end:5},rows:{start:1,end:6},geometry:i,material:a,elementCreate:this.createCone,onAdd:function(e,n,r,o,i){e.position.set(n-1*o,-10,r-1*i),t.groupCones.add(e),t.tiles.push(e)}}),this.scene.add(this.groupSpheres),this.scene.add(this.groupCones),n}},{key:"createHoles",value:function(t,e){for(var n=function(t){return 1*-t},r=e.cols.start;r<e.cols.end;r++)for(var o=e.rows.start;o<e.rows.end;o++){var i=new THREE.Path,a=n(r),u=n(o);i.moveTo(a,u),i.ellipse(a,u,.5,.5,0,2*Math.PI),i.autoClose=!0,t.holes.push(i),e.onAdd(e.elementCreate(e.geometry,e.material),a,u,r,o)}}},{key:"createGround",value:function(t){var e=[new THREE.MeshStandardMaterial({color:16717942,roughness:1,metalness:.1,flatShading:THREE.FlatShading}),new THREE.MeshStandardMaterial({color:15934719,flatShading:THREE.FlatShading})],n=new THREE.ExtrudeGeometry(t,{steps:1,depth:4,bevelEnabled:!1}),r=new THREE.Mesh(n,e);r.rotation.set(.5*Math.PI,0,0),this.scene.add(r)}},{key:"drawWave",value:function(){var t=0,e=0,n=0;if(this.playing){this.analyser.getByteFrequencyData(this.frequencyData);for(var r=0;r<this.tiles.length;r++)e=this.frequencyData[r],this.tiles[r]&&this.tiles[r].hasPhysics&&!this.tiles[r].falling&&(t=this.map(e,0,255,-50,80),this.tiles[r].gravity.set(Math.min(0,this.tiles[r].posY.get())).setVelocity(-t),this.tiles[r].falling=!0),this.tiles[r]&&!this.tiles[r].hasPhysics&&(n=this.map(e,0,255,.001,2),TweenMax.to(this.tiles[r].scale,.4,{y:n}))}}},{key:"createSphere",value:function(t,e){var n=new THREE.Mesh(t,e);return n.position.y=0,n.castShadow=!0,n.receiveShadow=!0,n}},{key:"addPhysics",value:function(t){var e=Ht(10,function(e){t.position.y=-Math.min(10,e)});t.posY=e,t.falling=!1,t.hasPhysics=!0;var n=Ut({acceleration:250,restSpeed:!1}).start(function(n){t.falling&&(n<10?e.update(n):t.falling=!1)});t.gravity=n}},{key:"createCone",value:function(t,e){var n=new THREE.Mesh(t,e);n.castShadow=!0,n.receiveShadow=!0,n.position.y=5;var r=new THREE.Object3D;return r.add(n),r.size=2,r}},{key:"addSpotLight",value:function(t,e,n,r){this.spotLight=t,this.spotLight.position.set(e,n,r),this.spotLight.castShadow=!0,this.scene.add(this.spotLight)}},{key:"addAmbientLight",value:function(t){var e=new THREE.AmbientLight(t,.5);this.scene.add(e)}},{key:"addGrid",value:function(){var t=new THREE.GridHelper(25,25);t.position.set(0,0,0),t.material.opacity=0,t.material.transparent=!0,this.scene.add(t)}},{key:"playSound",value:function(t){this.audioElement.src=t}},{key:"map",value:function(t,e,n,r,o){return(t-e)/(n-e)*(o-r)+r}},{key:"addSoundControls",value:function(){this.btnPlay=document.querySelector(".play"),this.btnPause=document.querySelector(".pause"),this.btnPlay.addEventListener("click",this.play.bind(this)),this.btnPause.addEventListener("click",this.pause.bind(this))}},{key:"pause",value:function(){this.audioElement.pause(),this.btnPause.classList.remove("control-show"),this.btnPlay.classList.add("control-show")}},{key:"play",value:function(){this.audioElement.play(),this.btnPlay.classList.remove("control-show"),this.btnPause.classList.add("control-show")}},{key:"createScene",value:function(){this.scene=new THREE.Scene,this.scene.background=new THREE.Color(this.sceneBackGroundColor),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),this.scene1=new THREE.Scene,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=THREE.PCFSoftShadowMap,document.body.appendChild(this.renderer.domElement)}},{key:"addEventListener",value:function(){var t=this;this.playIntro.addEventListener("click",function(e){e.currentTarget.classList.remove("control-show"),t.play()}),document.body.addEventListener("mouseup",function(){requestAnimationFrame(function(){document.body.style.cursor="-moz-grab",document.body.style.cursor="-webkit-grab"})}),document.body.addEventListener("mousedown",function(){requestAnimationFrame(function(){document.body.style.cursor="-moz-grabbing",document.body.style.cursor="-webkit-grabbing"})}),document.body.addEventListener("keyup",function(e){32!==e.keyCode&&"Space"!==e.code||(t.playIntro.classList.remove("control-show"),t.playing?t.pause():t.play())})}},{key:"createCamera",value:function(){this.camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.set(26,23,-17),this.scene.add(this.camera)}},{key:"addCameraControls",value:function(){this.controls=new THREE.OrbitControls(this.camera)}},{key:"animate",value:function(){this.controls.update(),this.renderer.render(this.scene,this.camera),this.drawWave(),requestAnimationFrame(this.animate.bind(this))}},{key:"radians",value:function(t){return t*Math.PI/180}},{key:"onResize",value:function(){var t=window.innerWidth,e=window.innerHeight;this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)}},{key:"setupAudio",value:function(){var t=this;this.audioElement=document.getElementById("audio"),this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioCtx.createAnalyser(),this.analyser.smoothingTimeConstant=.4,this.source=this.audioCtx.createMediaElementSource(this.audioElement),this.source.connect(this.analyser),this.source.connect(this.audioCtx.destination),this.bufferLength=this.analyser.frequencyBinCount,this.waveform=new Uint8Array(this.analyser.fftSize),this.frequencyData=new Uint8Array(this.analyser.fftSize),this.audioElement.volume=this.volume,this.audioElement.addEventListener("playing",function(){t.playing=!0}),this.audioElement.addEventListener("pause",function(){t.playing=!1}),this.audioElement.addEventListener("ended",function(){t.playing=!1,t.pause()})}}])&&Qt(e.prototype,n),r&&Qt(e,r),t}());window.addEventListener("resize",Zt.onResize.bind(Zt))}]);